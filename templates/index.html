<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sales Forecaster Pro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --primary: #6366f1; --bg: #f8fafc; --glass: rgba(255, 255, 255, 0.9); }
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .card { background: var(--glass); backdrop-filter: blur(10px); border-radius: 20px; padding: 40px; width: 100%; max-width: 500px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.85rem; font-weight: 600; color: #475569; margin-bottom: 5px; }
        select, input { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; background: white; font-size: 1rem; }
        .btn { width: 100%; background: var(--primary); color: white; padding: 14px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }
        #result { margin-top: 25px; padding: 20px; border-radius: 12px; display: none; text-align: center; background: #f1f5f9; }
        .sales-val { font-size: 2rem; color: var(--primary); font-weight: 800; display: block; }
    </style>
</head>
<body>
    <div class="card">
        <h2 style="text-align:center; margin-bottom:30px;"><i class="fas fa-chart-line"></i> Sales Predictor</h2>
        <form id="predictionForm">
            <div class="input-group">
                <label>Store ID</label>
                <input type="text" id="Store_id" placeholder="e.g., 253" required>
            </div>
            <div class="grid">
                <div class="input-group">
                    <label>Store Type</label>
                    <select id="Store_Type">
                        <option value="S1">S1 (Standard)</option><option value="S2">S2 (Express)</option>
                        <option value="S3">S3 (Super)</option><option value="S4">S4 (Mega)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Location</label>
                    <select id="Location_Type">
                        <option value="L1">L1</option><option value="L2">L2</option>
                        <option value="L3">L3</option><option value="L4">L4</option><option value="L5">L5</option>
                    </select>
                </div>
            </div>
            <div class="grid">
                <div class="input-group">
                    <label>Region</label>
                    <select id="Region_Code">
                        <option value="R1">R1</option><option value="R2">R2</option>
                        <option value="R3">R3</option><option value="R4">R4</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Date</label>
                    <input type="date" id="Date" required>
                </div>
            </div>
            <div class="grid">
                <div class="input-group">
                    <label>Holiday?</label>
                    <select id="Holiday"><option value="0">No</option><option value="1">Yes</option></select>
                </div>
                <div class="input-group">
                    <label>Discount?</label>
                    <select id="Discount"><option value="0">No</option><option value="1">Yes</option></select>
                </div>
            </div>
            <button type="submit" class="btn">Calculate Prediction</button>
        </form>
        <div id="result">
            <span style="font-size:0.9rem; color:#64748b;">Estimated Daily Sales</span>
            <span class="sales-val" id="salesVal">₹0.00</span>
        </div>
    </div>

    <script>
        document.getElementById('predictionForm').onsubmit = async (e) => {
            e.preventDefault();
            const data = {
                Store_id: document.getElementById('Store_id').value,
                Store_Type: document.getElementById('Store_Type').value,
                Location_Type: document.getElementById('Location_Type').value,
                Region_Code: document.getElementById('Region_Code').value,
                Date: document.getElementById('Date').value,
                Holiday: parseInt(document.getElementById('Holiday').value),
                Discount: parseInt(document.getElementById('Discount').value)
            };
            
            const res = await fetch('/predict', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });
            const result = await res.json();
            
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            if(result.success) {
                document.getElementById('salesVal').innerText = '₹' + result.prediction.sales.toLocaleString();
            } else {
                alert('Error: ' + result.message);
            }
        };
    </script>
</body>
</html>